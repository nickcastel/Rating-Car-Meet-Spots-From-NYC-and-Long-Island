<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb18030">
<title>Molloy Media Archaeology</title>
<meta name="description" content="A student-led project by Molloy College. Media Archaeology in the Boyne Valley.">
<meta name='viewport' content='initial-scale=1,maximum-scale=1' />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.js"></script>
<script src='https://api.mapbox.com/mapbox.js/v3.3.1/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v3.3.1/mapbox.css' rel='stylesheet' />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-zoomslider/v0.7.0/L.Control.Zoomslider.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-zoomslider/v0.7.0/L.Control.Zoomslider.css' rel='stylesheet' />
<style>

body, html {
  margin:0;
  padding:0;
  height: 100%;
  overflow: hidden;
}

<!--THIS DISABLES THE SCROLL FUNCTION -->

html {
  overflow-y: scroll !important;
}

<!--END SCROLLBAR BLOCK -->

<!--CSS FOR MAP -->

#map-container {
            height: 70%;
            padding-bottom: 0px;
            margin: 0px;
}

#map {
        display: block;
        height: 100%;
        width: 100%;
        margin-left: auto;
        margin-right: auto;
}

.popup {
  text-align:center;
}

.popup .slideshow .image{
  display:none;
}

.popup .slideshow .image.active {
  display:block;
}

.popup .slideshow img {
  width:100%;
}

.popup .slideshow .caption {
  background:#eee;
  padding:10px;
}

.popup .cycle {
  padding:10px 0 20px;
}

.popup .cycle a.prev { float:left;
}

.popup .cycle a.next { float:right;
}

/* Adjustments to account for mapbox.css box-sizing rules */
.leaflet-control-zoomslider-knob { width:14px; height:6px; }
.leaflet-container .leaflet-control-zoomslider-body {
  -webkit-box-sizing:content-box;
     -moz-box-sizing:content-box;
          box-sizing:content-box;
  }

<!--End CSS for Map -->

</style>
</head>

<body>
<div id='map'></div>
<div id="map-container">

<div id='map'></div>
</div>


<!-- API ACCESS FOR THE MAP -->
<script src='https://code.jquery.com/jquery-1.11.0.min.js'></script>
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoibmNhc3RlbDIwMjIiLCJhIjoiY2wxZ2dmajd5MGNxdzNlcWgwczdpamp5ZSJ9.uFmKpfnrbtbfICKRUAvA6g';
var map = L.mapbox.map('map', 'mapbox.streets', {
  container: 'map',
});

      var myLayer = L.mapbox.featureLayer().addTo(map);

      var geoJson = [{
          type: 'Feature',
          "geometry": { "type": "Point", "coordinates": [-74.002322,40.758295]},
          "properties": {
              'title': 'Jacob K. Javits Convention Center',
              'marker-color': '#7e7e7e',
              'marker-symbol': 'city',
              'marker-size': 'large',

              // Store the image url and caption in an array.
              'images': [
                ['https://live.staticflickr.com/65535/52065903054_b05325663f_b.jpg','My first ever visit to the Javits Center truly is one of the biggest memories I have as it is what opened my eyes to all of the other types of cars. No longer was I interested in only old American muscle cars but now my interest in Japanese and European cars had began to grow.'],          ['https://live.staticflickr.com/65535/52066158055_2b7f30bc84_k.jpg','This also became my first ever encounter with tuner culture. A section of car culture full of people who strive to get the best desired performance level out of their cars through engine tuning, to aftermarket parts and accessories.'],
                ['https://live.staticflickr.com/65535/52065667026_9a263f328d_c.jpg', '<iframe width="280" height="195" src="https://www.youtube.com/embed/3MoX_YwfHx8?start=324" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>']
              ]
          }
      }, {
          type: 'Feature',
          "geometry": { "type": "Point", "coordinates": [-73.429925,40.610675]},
          "properties": {
              'title': 'Tobay Beach',
              'marker-color': '#0e9fdd',
              'marker-symbol': 'wetland',
              'marker-size': 'large',
              'images': [
                ['https://live.staticflickr.com/65535/52066125400_64ee667f39_b.jpg','Tobay Beach, as you will find out in the video located on the last slide here, is a site I have not had much luck from. Aside from the great memories of doing donuts arounded the lightpoles as well as our cars before leaving for Buffalo Wild Wings, I have not had the best luck when it has come to car meets.'],
                ['https://live.staticflickr.com/65535/52065937304_76bbfaccef_c.jpg','Despite not having good luck here, like I said, it still holds some amazing memories from early on in my car community career, if you will. Not to mention it is right by the water and maybe in the future I will have better luck with the car shows hosted here.'],
                ['https://live.staticflickr.com/65535/52065700696_10e92d893a_h.jpg','<iframe width="280" height="195" src="https://www.youtube.com/embed/3MoX_YwfHx8?start=432" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>']
              ]
          }
      }, {
          type: 'Feature',
          "geometry": { "type": "Point", "coordinates": [-73.252115, 40.641073]},
          "properties": {
              'title': 'Captree State Park',
              'marker-color': '#0e9fdd',
              'marker-symbol': 'lighthouse',
              'marker-size': 'large',
              'images': [
                ['https://live.staticflickr.com/65535/52065652313_bb1760f48a_c.jpg','Captree State Park is home to the first community run car meet that I have ever attended. It was also the first time I had ever seen a Mazda RX7 before, one of my favorite cars of all time... Even if it was not in the greatest condition ever...'],
                ['https://live.staticflickr.com/65535/51162825573_85f2c634fb_h.jpg','It is also the place where I took one of the best night shots of my previous car. A shot that Captured a passing plain in a long exposure, creating the illusion of something that appears to be a shooting star pasing overhead! By far my favorite photo of my previous car.'],
                ['https://live.staticflickr.com/65535/52065870769_e920723c4e_b.jpg','<iframe width="280" height="195" src="https://www.youtube.com/embed/3MoX_YwfHx8?start=559" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>']
              ]
          }
      }, {
          type: 'Feature',
          "geometry": { "type": "Point", "coordinates": [-73.654350,40.635138]},
          "properties": {
              'title': 'Cars and Coffee',
              'marker-color': '#66482D',
              'marker-symbol': 'cafe',
              'marker-size': 'large',
              'images': [
                ['https://live.staticflickr.com/65535/52064594787_84f65a8515_k.jpg','I am definitely not a morning person and I never had a reason to become one. That was until I discovered the fruitful world of Cars and Coffee. Cars and Coffee meets are a super popular form of casual meet up that take place across the country and even around the globe! It is a great way to sit back, grab a bite and relax while looking at everyone and their automobiles!'],
                ['https://live.staticflickr.com/65535/52065652438_52d067c08b_b.jpg', 'Cars and Coffee holds a near and dear spot in my heart due to all the whacky cars I have seen over the years! By far this small BMW Isetta is my favorite. The little one seater that reminds me of a refridgerator and funny enough, the door opens like a fridge too!'],
                ['https://live.staticflickr.com/65535/52066125360_8636993550_c.jpg','<iframe width="280" height="195" src="https://www.youtube.com/embed/3MoX_YwfHx8?start=200" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>']
              ]
          }
      }, {
          type: 'Feature',
          "geometry": { "type": "Point", "coordinates": [-73.251439,40.724978]},
          "properties": {
              'title': '7 Eleven',
              'marker-color': '#2DA131',
              'marker-symbol': 'shop',
              'marker-size': 'large',
              'images': [
                ['https://live.staticflickr.com/65535/52064685237_8ff7039c16_c.jpg','7 Eleven is a place that we all have visited and will most likely continue visiting. I never had exoected a place like 7 Eleven to get any better than a place to get quick snacks, amazing Slurpees and potentially hazardous hot foods that you should avoid at all costs, that was until I stumbled upon the car culture that was growing through their car focused Instagram account!'],
                ['https://live.staticflickr.com/65535/52065700701_2f59e81bb7_c.jpg','The representation of the automotive community in posts like the one previously shown quickly turned every 7 Eleven into a car meet spot. JDM to American Muscle to Euro Sport cars, all car fans began to call 7 Eleven their home shortly after these posts.'],
                ['https://live.staticflickr.com/65535/52066216240_29e42db065_c.jpg','<iframe width="280height="195src="https://www.youtube.com/embed/3MoX_YwfHx8?start=654" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>']
              ]
          }
      }];

// Add custom popup html to each marker.
myLayer.on('layeradd', function(e) {
    var marker = e.layer;
    var feature = marker.feature;
    var images = feature.properties.images
    var slideshowContent = '';

    for(var i = 0; i < images.length; i++) {
        var img = images[i];

        slideshowContent += '<div class="image' + (i === 0 ? ' active' : '') + '">' +
                              '<img src="' + img[0] + '" />' +
                              '<div class="caption">' + img[1] + '</div>' +
                            '</div>';
    }

    // Create custom popup content
    var popupContent =  '<div id="' + feature.properties.id + '" class="popup">' +
                            '<h2>' + feature.properties.title + '</h2>' +
                            '<div class="slideshow">' +
                                slideshowContent +
                            '</div>' +
                            '<div class="cycle">' +
                                '<a href="#" class="prev">&laquo; Previous</a>' +
                                '<a href="#" class="next">Next &raquo;</a>' +
                            '</div>'
                        '</div>';

    // http://leafletjs.com/reference.html#popup
    marker.bindPopup(popupContent,{
        closeButton: false,
        minWidth: 320
    });
});

// Add features to the map
myLayer.setGeoJSON(geoJson);

$('#map').on('click', '.popup .cycle a', function() {
    var $slideshow = $('.slideshow'),
        $newSlide;

    if ($(this).hasClass('prev')) {
        $newSlide = $slideshow.find('.active').prev();
        if ($newSlide.index() < 0) {
            $newSlide = $('.image').last();
        }
    } else {
        $newSlide = $slideshow.find('.active').next();
        if ($newSlide.index() < 0) {
            $newSlide = $('.image').first();
        }
    }

    $slideshow.find('.active').removeClass('active').hide();
    $newSlide.addClass('active').show();
    return false;
});

<!-- SET THE MAP VIEW HERE -->
map.setView([41, -74], 8);
</script>


</body>
</html>
